<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>DOM을 익히기</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script type="text/javascript">
    //$('선택자').action(할일);   할일==> function(){}
    //$('선택자').action(function(){});
    
    /*
       $('선택자').html();           엘리먼트.innerHTML
       $('선택자').text();           엘리먼트.innerText
       $('선택자').val();            document.폼이름.name.value
    */
    
       
    //$('div') ==> 조건을 만족하는 Collection!!
    //만약 조건을 만족하는 엘리먼트가 없다면 느낌 ==> ArrayList list = new ArrayList();  
    //==> size()가 0인 list에 대해 실행  for(int i=0; i<list.size(); i++){  .html("파이팅")  }
      
    //$(document).ready(function(){});
    $(document).ready(function(){//document(전체문서)가 브라우저에 로딩될때까지 기다리자!!
    	
        //$('div').html('8반파이팅~!!');
    	
        //외부문서에 표현된 데이터를 얻어오자~!! ==> $.ajax(); 비동기 서버 통신 
        //                                $.ajax({key:value,key:value});
        //외부문서에 표현된 데이터를 얻어오자~!! ==> $.get()  post() load()
         
        $.ajax({
        	//url: 원하는 데이터를 출력하는 페이지 요청 ==> .txt  .html  .jsp  .do  .json  .xml
        	//data: 서버에게 데이터를 전달 (입력폼에 들어간 값)
        	//success:또는 error:요청후 얻은 데이터를 실행하는 것 ==> 콜백함수 지정
        	//dataType: 응답데이터의 유형을 표현
        	//type: 요청방식 (보통은 생략)  GET POST PUT DELETE
        	url:'books.xml' //1.요청
        	,
        	
        	//URL요청 성공시 실행할 콜백함수를 정의
        	success:function(data){// (data, status, xhr){//2.응답 처리  (요청url이 정상적으로 동작했을때)
        	//Function( Anything data, String textStatus, jqXHR jqXHR )
        	//data ==> text,html,json,array
        	//data == XMLDocument
        	   //var list = data.getElementsByTagName("title");
        	   /*
        	      list=[<title>JavaProgramming</title>, ==>0
        		        <title>OracleSQL</title>,      ==>1
        		        <title>JavaScript</title>,     ==>2
        		        <title>XMLBible</title>]       ==>3
        	     */
        	   /*  
        	    for(var i=0; i<list.length; i++){
        	    	console.log(list.item(i).textContent);        	    	
        	    }
        	   */
        	   
        	   //$.each(객체,할일);
        	   var htmlTxt='<ul>';
        	   $(data).find('title').each( function(){ //data==XMLDocument, ele==각각의 요소데이터
        		    //console.log($(this).text());//titleElement.innerText
        	        htmlTxt += '<li>'+$(this).text()+'</li>';
        	   });
        	   htmlTxt+='</ul>';
        	   
        	   $('div').html(htmlTxt);//divElement.innerHTML
        	}
        	,
        	//URL요청 실패시 실행할 콜백함수를 정의
        	error:function(xhr, status, errMsg){
        	//Function( jqXHR jqXHR, String textStatus, String errorThrown )
               $('div').html('<font color=red>요청실패ㅠㅠ</font>');
        	}
        });//ajax
        
    });//document ready
    

    </script>  
</head>
<!-- 
    dom_test.html
   (books.xml문서에서 책의 정보중  책제목을 가져와서 출력)
   
   방법1) JavaScript의 XMLHttpRequest객체를 이용
   방법2) jQuery(JavaScript)의 $.ajax(); 이용
   
 -->
<body>
 <h3>DOM을 익히자~!!(내가 원하는 데이터 추출)</h3>

 <!-- 출력할 영역을 잡아주자(div,p,span) -->
 <div></div>
 

</body>
</html>


